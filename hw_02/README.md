# Настройка облачной инфраструктуры для проекта по определению мошеннических транзакций

### Команды для работы с Terraform в Makefile

```
make init
make validate
make plan
make apply
make destroy
make clean
```

Команда `make destroy` - уничтожает всё, кроме бакета и сервисного аккаунта.

### Описание

Бакет доступен по адресу: `s3://otus-mlops-bucket-632bf4e5c90b8d6f`.

Большой файл `main.tf` разделён по логическим ресурсам на несколько меньших файлов.

Действия по загрузке данных автоматизированы с помощью скриптов в директории `infra/scripts/`, но команды вводились вручную, потому что интересно.

`.env.example` - пример того, как должен выглядеть файл `.env`, в который записывается информация о бакете в течение исполнения команды `make apply`.

Скриншоты в директории `screenshots/`:
- `01_s3_to_s3.png` - зашли на прокси ВМ и начали загрузку данных на созданный бакет;
- `02_ssh_dataproc.png` - зашли на мастер-ноду кластера из прокси ВМ;
- `03_hadoop_distcp.png` - начали загрузку данных из созданного бакета в файловую систему HDFS;
- `04_hdfs_ls.png` - содержимое HDFS.

### Оценка затрат

**32580,65 ₽** (Кластер Spark, 4 ноды) против **1021,83 ₽** (Object Storage 464 GB).
